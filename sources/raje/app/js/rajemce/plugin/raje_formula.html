<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap 101 Template</title>

  <style>
    body {
      padding: 20px
    }
  </style>

  <link rel="stylesheet" href="../../../css/bootstrap.min.css">

  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_SVG">
  </script>

  <script src="../../../node_modules/tinymce/tinymce.min.js">
  </script>

</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <div class="form-group text-center">
        <p id="formula_output" class="rash-math">````</p>
      </div>
    </div>
    <div class="row">
      <textarea id="formula_input" class="form-control" columns="3" autofocus></textarea>
    </div>
    <div class="row">
      <button class="btn btn-success" id="formula_submit">Submit</button>
    </div>
  </div>

  <script type="text/javascript" src="../../jquery.min.js">
  </script>

  <script>
    $('#formula_submit').on('click', function () {

      let svgFormula = $('#formula_output').find('svg')

      svgFormula.attr('role', 'math')

      // Save input
      var formula_input = [
        svgFormula,
        $('#MathJax_SVG_Hidden').parent()
      ]

      // Passing data and close window
      window.parent.tinyMCE.get('raje_root').formula_input = formula_input
      window.parent.tinyMCE.activeEditor.windowManager.close()
    })

    $('#formula_input').on('input propertychange paste', function () {
      MathJax.Hub.processSectionDelay = 0;
      MathJax.Hub.Queue([
        'Text',
        MathJax.Hub.getAllJax($('#formula_output')[0])[0],
        $('#formula_input').val()
      ])
    })
  </script>
</body>

</html>